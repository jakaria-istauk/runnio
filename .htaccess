RewriteEngine On

# Route API requests to backend directory
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^api/(.*)$ backend/api/$1 [QSA,L]

# Route frontend requests to frontend directory (for production)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !^/api/
RewriteCond %{REQUEST_URI} !^/backend/
RewriteRule ^(.*)$ frontend/dist/$1 [QSA,L]

# Default to frontend index.html for SPA routing
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !^/api/
RewriteCond %{REQUEST_URI} !^/backend/
RewriteRule ^.*$ frontend/dist/index.html [QSA,L]
